/*!
********************************************************************************
* @file     :
*
* @brief    :
*
* @version  : V0.0.1
*
* @copyright: All Rights Reserved.
********************************************************************************
* @changelog: L.H.T 2017-10-01 first version
*******************************************************************************/
#include <menux/nuxos/fs/inode.h>

/*!
********************************************************************************
* PUBLIC FUNCTIONS
*******************************************************************************/
/*!
********************************************************************************
* @brief :
*
* @param :
*
* @retval:
*******************************************************************************/
void inode_namecpy(char *dest, const char *src)
{
	while ((*src) && (*src != '/'))
	{
		*dest++ = *src++;
	}

	*dest = '\0';
}
/*!
********************************************************************************
* @brief :
*
* @param :
*
* @retval:
*******************************************************************************/
int inode_namelen(const char *name)
{
	const char *tmp = name;
	while ((*tmp) && (*tmp != '/'))
	{
		tmp++;
	}

	return tmp - name;
}
/*!
********************************************************************************
* @brief :
*
* @param :
*
* @retval:
*******************************************************************************/
const char *inode_nextname(const char *name)
{
	while ((*name != '\0') && (*name != '/'))
	{
		name++;
	}

	while (*name == '/')
	{
		name++;
	}

	return name;
}
/*!
********************************************************************************
* @brief :
*
* @param :
*
* @retval:
*******************************************************************************/
const char *inode_basename(const char *name)
{
	const char *basename = NULL;

	for (;;)
	{
		name = inode_nextname(name);
		if (name == NULL || *name == '\0')
		{
			break;
		}

		basename = name;
	}

	return basename;
}
